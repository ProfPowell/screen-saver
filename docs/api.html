<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Documentation - Screen Saver</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav>
    <div class="logo">&lt;screen-saver&gt;</div>
    <div class="links">
      <a href="index.html">Home</a>
      <a href="demos.html">Demos</a>
      <a href="api.html" class="active">API</a>
    </div>
  </nav>

  <main>
    <h1>API Documentation</h1>

    <h2>Basic Usage</h2>
    <code-block language="html" theme="dark"><screen-saver timeout="180" effect="bounce3d">
  Your Text Here
</screen-saver></code-block>

    <h2>Attributes</h2>
    <table>
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Type</th>
          <th>Default</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>timeout</code></td>
          <td>number</td>
          <td>180</td>
          <td>Idle delay in seconds before activation</td>
        </tr>
        <tr>
          <td><code>effect</code></td>
          <td>string</td>
          <td>"bounce3d"</td>
          <td>Effect name: "bounce3d", "matrix", or "ascii-glitch"</td>
        </tr>
        <tr>
          <td><code>speed</code></td>
          <td>number</td>
          <td>1</td>
          <td>Animation speed multiplier (0.5 to 3)</td>
        </tr>
        <tr>
          <td><code>background</code></td>
          <td>string</td>
          <td>-</td>
          <td>Background color or image URL</td>
        </tr>
      </tbody>
    </table>

    <h2>Properties</h2>
    <table>
      <thead>
        <tr>
          <th>Property</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>isActive</code></td>
          <td>boolean (readonly)</td>
          <td>Whether the screen saver is currently active</td>
        </tr>
        <tr>
          <td><code>timeout</code></td>
          <td>number</td>
          <td>Get/set the idle timeout in seconds</td>
        </tr>
        <tr>
          <td><code>effect</code></td>
          <td>string</td>
          <td>Get/set the current effect name</td>
        </tr>
        <tr>
          <td><code>speed</code></td>
          <td>number</td>
          <td>Get/set the animation speed multiplier</td>
        </tr>
        <tr>
          <td><code>background</code></td>
          <td>string | null</td>
          <td>Get/set the background color or image</td>
        </tr>
      </tbody>
    </table>

    <h2>Methods</h2>
    <div class="card">
      <h3>activate()</h3>
      <p>Programmatically activate the screen saver.</p>
      <code-block language="javascript" theme="dark">const el = document.querySelector('screen-saver');
el.activate();</code-block>
    </div>

    <div class="card">
      <h3>deactivate()</h3>
      <p>Programmatically deactivate the screen saver.</p>
      <code-block language="javascript" theme="dark">el.deactivate();</code-block>
    </div>

    <div class="card">
      <h3>ScreenSaver.registerEffect(name, effectClass)</h3>
      <p>Register a custom effect.</p>
      <code-block language="javascript" theme="dark" show-lines>import { ScreenSaver, Effect } from 'screen-saver';

class MyEffect extends Effect {
  start() {
    // Create your effect in this.container
    // Use this.text for the slot content
    // Use this.speed for animation speed
    // Check this.reducedMotion for accessibility
  }

  stop() {
    // Clean up animations
    super.stop(); // Cancels requestAnimationFrame
  }

  destroy() {
    // Full cleanup
    super.destroy(); // Calls stop() and clears container
  }
}

ScreenSaver.registerEffect('my-effect', MyEffect);</code-block>
    </div>

    <h2>Events</h2>
    <div class="card">
      <h3>screensaver-activate</h3>
      <p>Fired when the screen saver activates.</p>
      <code-block language="javascript" theme="dark">el.addEventListener('screensaver-activate', () => {
  console.log('Screen saver started');
});</code-block>
    </div>

    <div class="card">
      <h3>screensaver-deactivate</h3>
      <p>Fired when the screen saver dismisses. Includes duration in milliseconds.</p>
      <code-block language="javascript" theme="dark">el.addEventListener('screensaver-deactivate', (e) => {
  console.log(`Active for ${e.detail.duration}ms`);
});</code-block>
    </div>

    <h2>CSS Custom Properties</h2>
    <table>
      <thead>
        <tr>
          <th>Property</th>
          <th>Default</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>--screen-saver-bg</code></td>
          <td>rgba(0, 0, 0, 0.95)</td>
          <td>Overlay background color</td>
        </tr>
        <tr>
          <td><code>--screen-saver-text-color</code></td>
          <td>#00ff00</td>
          <td>Primary text color</td>
        </tr>
        <tr>
          <td><code>--screen-saver-extrude-color</code></td>
          <td>#003300</td>
          <td>3D extrusion color (bounce3d)</td>
        </tr>
        <tr>
          <td><code>--screen-saver-font-family</code></td>
          <td>'Arial Black', sans-serif</td>
          <td>Font family for displayed text</td>
        </tr>
        <tr>
          <td><code>--screen-saver-font-size</code></td>
          <td>4rem</td>
          <td>Font size for displayed text</td>
        </tr>
        <tr>
          <td><code>--screen-saver-z-index</code></td>
          <td>999999</td>
          <td>Z-index of the overlay</td>
        </tr>
      </tbody>
    </table>

    <h2>Accessibility</h2>
    <div class="card">
      <h3>Reduced Motion</h3>
      <p>The component automatically detects <code>prefers-reduced-motion: reduce</code> and displays static centered text without animation.</p>
    </div>

    <div class="card">
      <h3>ARIA</h3>
      <p>The overlay has <code>role="dialog"</code> and appropriate <code>aria-label</code> and <code>aria-hidden</code> attributes that update with the component state.</p>
    </div>

    <div class="card">
      <h3>Keyboard Dismissal</h3>
      <p>The screen saver can be dismissed by pressing any key.</p>
    </div>

    <h2>TypeScript</h2>
    <code-block language="typescript" theme="dark" show-lines>import { ScreenSaver, Effect } from 'screen-saver';

// Element is typed
const el = document.querySelector('screen-saver') as ScreenSaver;

// Properties are typed
el.timeout = 300;
el.effect = 'matrix';

// Events are typed
el.addEventListener('screensaver-deactivate', (e: CustomEvent<{ duration: number }>) => {
  console.log(e.detail.duration);
});</code-block>

    <h2>Built-in Effects</h2>

    <div class="card">
      <h3>bounce3d</h3>
      <p>Classic DVD-logo style bouncing text with 3D depth effect.</p>
      <ul class="feature-list">
        <li>Extruded shadow via layered text-shadow</li>
        <li>Subtle Y-axis rotation during movement</li>
        <li>Color cycling on edge bounces</li>
        <li>Smooth animation with delta time</li>
      </ul>
    </div>

    <div class="card">
      <h3>matrix</h3>
      <p>Digital rain effect inspired by The Matrix.</p>
      <ul class="feature-list">
        <li>Canvas-based rendering for performance</li>
        <li>Japanese katakana and ASCII characters</li>
        <li>Semi-transparent overlay for trail effect</li>
        <li>Slot text prominently displayed with glow</li>
      </ul>
    </div>

    <div class="card">
      <h3>ascii-glitch</h3>
      <p>Cyberpunk-style glitch effect.</p>
      <ul class="feature-list">
        <li>Random character swapping</li>
        <li>Chromatic aberration layers (red/blue shift)</li>
        <li>Flicker effect via opacity changes</li>
        <li>Variable glitch intensity over time</li>
      </ul>
    </div>
  </main>

  <footer>
    <p>Built with vanilla JavaScript. No dependencies.</p>
  </footer>

  <script type="module">
    import './code-block.js';
  </script>
</body>
</html>
